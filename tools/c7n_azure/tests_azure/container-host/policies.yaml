policies:
  - name: c7n-%HOST_MODE%-periodic
    description: Tests periodic policies on ACI
    resource: azure.resourcegroup
    mode: 
      type: container-periodic
      schedule: "* * * * *"
    filters:
      - type: value
        key: name
        op: eq
        value: "%RG_NAME%"
      - tag:c7n-%HOST_MODE%-periodic: absent
    actions:
      - type: tag
        tag: c7n-%HOST_MODE%-periodic
        value: passed
  - name: c7n-%HOST_MODE%-event
    description: Tests event policies on ACI
    resource: azure.resourcegroup
    mode: 
      type: container-event
      events:
        - resourceProvider: Microsoft.Resources/subscriptions/resourceGroups
          event: write
    filters:
      - type: value
        key: name
        op: eq
        value: "%RG_NAME%"
      - tag:c7n-%HOST_MODE%-event: absent
    actions:
      - type: tag
        tag: c7n-%HOST_MODE%-event
        value: passed